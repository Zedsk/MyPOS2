@model MyPOS2.Models.management.UserInfoViewModel

@{
    ViewBag.Title = "Index";
}

@section Styles {
    <link href="@Url.Content("~/Content/pos2.css")" rel="stylesheet" type="text/css" />
}

<h2>Gestion des utilisateurs</h2>

<span><a class="btn btn-default" href="../Account/Register">Ajouter un nouvel utilisateur &raquo;</a></span>
<div class="table-responsive">
    <table class="table table-striped table-hover ">
        <thead>
            <tr>
                <th>#</th>
                <th>Nom</th>
                <th>Prenom</th>
                <th>Rue</th>
                <th>Code postal</th>
                <th>Ville</th>
                <th>N° de Tél</th>
                <th>Date de création</th>
                <th>Role</th>
            </tr>
        </thead>
        <tbody>
            @{
                var i = 0;
                foreach (var item in Model.UserList)
                {
                    i++;
                    if (item.isBlocked && item.LockoutEndDateUtc != null)
                    {
                        <tr style="color:darkorange">
                            <td>@i</td>
                            <td>@item.nameUser</td>
                            <td>@item.firstname</td>
                            <td>@item.street</td>
                            <td>@item.zipCode</td>
                            <td>@item.city</td>
                            <td>@item.phone</td>
                            <td>@item.creationDate</td>
                            <td>@item.role</td>
                            <td>
                                @Html.ActionLink("Modifier", "Edit", new { id = item.userId }) |
                                @*@Html.ActionLink("Supprimer", "#", new { id = item.userId }, new { onclick = "return confirm('Êtes-vous sur de vouloir supprimer cet utilisateur?');"}) |*@
                                @Html.ActionLink("Bloquer", "BlockUser", new { id = item.userId }) |
                                @Html.ActionLink("Débloquer", "UnblockUser", new { id = item.userId })
                            </td>
                        </tr>
                    }
                    else
                    {
                        <tr>
                            <td>@i</td>
                            <td>@item.nameUser</td>
                            <td>@item.firstname</td>
                            <td>@item.street</td>
                            <td>@item.zipCode</td>
                            <td>@item.city</td>
                            <td>@item.phone</td>
                            <td>@item.creationDate</td>
                            <td>@item.role</td>
                            <td>
                                @Html.ActionLink("Modifier", "Edit", new { id = item.userId }) |
                                @*@Html.ActionLink("Supprimer", "#", new { id = item.userId }, new { onclick = "return confirm('Êtes-vous sur de vouloir supprimer cet utilisateur?');"}) |*@
                                @Html.ActionLink("Bloquer", "BlockUser", new { id = item.userId }) |
                                @Html.ActionLink("Débloquer", "UnblockUser", new { id = item.userId })
                            </td>
                        </tr>
                    }
                }
            }
        </tbody>
    </table>
</div>
<div>
    @Html.ActionLink("Retour au Menu", "Management", "Home")
</div>


